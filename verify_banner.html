<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Banner Verification Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; }
        .test-item { background: #f5f5f5; padding: 15px; margin: 10px 0; border-radius: 5px; }
        .success { color: green; }
        .error { color: red; }
        .loading { color: orange; }
        button { padding: 10px 20px; background: #007cba; color: white; border: none; border-radius: 4px; cursor: pointer; margin: 5px; }
    </style>
</head>
<body>
    <h1>üéØ LamGame Banner Verification</h1>
    <p>Testing banner functionality on <strong>lamgame.localhost</strong></p>

    <div class="test-item">
        <h3>‚úÖ 1. API Endpoints Test</h3>
        <button onclick="testAllAPIs()">Test All APIs</button>
        <div id="api-results"></div>
    </div>

    <div class="test-item">
        <h3>‚úÖ 2. Banner HTML Structure</h3>
        <button onclick="testBannerHTML()">Test HTML Structure</button>
        <div id="html-results"></div>
    </div>

    <div class="test-item">
        <h3>‚úÖ 3. Assets Loading</h3>
        <button onclick="testAssets()">Test CSS/JS Loading</button>
        <div id="assets-results"></div>
    </div>

    <div class="test-item">
        <h3>‚úÖ 4. Open Live Site</h3>
        <button onclick="openLiveSite()">Open lamgame.localhost</button>
        <p>Click to verify the banner visually</p>
    </div>

    <script>
        const BASE_URL = 'https://lamgame.localhost';

        async function testAllAPIs() {
            const resultsDiv = document.getElementById('api-results');
            resultsDiv.innerHTML = '<span class="loading">Testing APIs...</span>';
            
            const endpoints = ['jobs', 'topics', 'blogs', 'sources'];
            const results = [];
            
            for (const endpoint of endpoints) {
                try {
                    const response = await fetch(`${BASE_URL}/api/banner/${endpoint}`);
                    const data = await response.json();
                    
                    if (response.ok && data.success) {
                        results.push(`<span class="success">‚úì ${endpoint}: OK</span>`);
                    } else {
                        results.push(`<span class="error">‚úó ${endpoint}: Failed</span>`);
                    }
                } catch (error) {
                    results.push(`<span class="error">‚úó ${endpoint}: Network Error</span>`);
                }
            }
            
            resultsDiv.innerHTML = results.join('<br>');
        }

        async function testBannerHTML() {
            const resultsDiv = document.getElementById('html-results');
            resultsDiv.innerHTML = '<span class="loading">Checking HTML structure...</span>';
            
            try {
                const response = await fetch(BASE_URL);
                const html = await response.text();
                
                const checks = [
                    { name: 'Hero Section', pattern: 'hero-optimized' },
                    { name: '4 Slides', pattern: 'slide.*slide.*slide.*slide' },
                    { name: 'Navigation Arrows', pattern: 'banner-arrow' },
                    { name: 'Dots Navigation', pattern: 'banner-dot' },
                    { name: 'Dynamic Content IDs', pattern: 'id="job-stats".*id="hot-topic"' }
                ];
                
                const results = checks.map(check => {
                    const found = new RegExp(check.pattern, 'i').test(html);
                    const status = found ? 'success' : 'error';
                    const icon = found ? '‚úì' : '‚úó';
                    return `<span class="${status}">${icon} ${check.name}</span>`;
                });
                
                resultsDiv.innerHTML = results.join('<br>');
            } catch (error) {
                resultsDiv.innerHTML = '<span class="error">‚úó Failed to check HTML</span>';
            }
        }

        async function testAssets() {
            const resultsDiv = document.getElementById('assets-results');
            resultsDiv.innerHTML = '<span class="loading">Testing asset loading...</span>';
            
            const assets = [
                { name: 'Banner CSS', url: `${BASE_URL}/themes/shop/emsaigon/assets/css/lamgame-optimized-banner.css` },
                { name: 'Banner JS', url: `${BASE_URL}/themes/shop/emsaigon/assets/js/lamgame-optimized-banner.js` }
            ];
            
            const results = [];
            
            for (const asset of assets) {
                try {
                    const response = await fetch(asset.url, { method: 'HEAD' });
                    const status = response.ok ? 'success' : 'error';
                    const icon = response.ok ? '‚úì' : '‚úó';
                    const size = response.headers.get('content-length');
                    const sizeText = size ? `(${Math.round(size/1024)}KB)` : '';
                    
                    results.push(`<span class="${status}">${icon} ${asset.name} ${sizeText}</span>`);
                } catch (error) {
                    results.push(`<span class="error">‚úó ${asset.name}: Network Error</span>`);
                }
            }
            
            resultsDiv.innerHTML = results.join('<br>');
        }

        function openLiveSite() {
            window.open(BASE_URL, '_blank');
        }

        // Auto-run basic tests on page load
        window.addEventListener('load', () => {
            setTimeout(() => {
                testAllAPIs();
                testBannerHTML();
                testAssets();
            }, 1000);
        });
    </script>

    <hr style="margin: 30px 0;">
    <h2>üìã Manual Verification Checklist</h2>
    <ul>
        <li>‚úÖ Banner shows 4 different slides</li>
        <li>‚úÖ Navigation arrows work (desktop only)</li>
        <li>‚úÖ Dots navigation clickable</li>
        <li>‚úÖ Auto-play every 6 seconds</li>
        <li>‚úÖ Pause on hover</li>
        <li>‚úÖ Dynamic content updates</li>
        <li>‚úÖ Mobile responsive</li>
        <li>‚úÖ Touch/swipe on mobile</li>
    </ul>

    <p><strong>Expected slides:</strong></p>
    <ol>
        <li><strong>Jobs:</strong> "Kh√°m Ph√° Vi·ªác L√†m Game Dev Hot Nh·∫•t!"</li>
        <li><strong>Forum:</strong> "Th·∫£o Lu·∫≠n S√¥i ƒê·ªông: Topic Forum N√≥ng H·ªïi!"</li>
        <li><strong>Blog:</strong> "B√†i Vi·∫øt M·ªõi Nh·∫•t T·ª´ Developer!"</li>
        <li><strong>Creative:</strong> "Kh√°m Ph√° Game M·ªõi & √ù T∆∞·ªüng S√°ng T·∫°o!"</li>
    </ol>
</body>
</html>